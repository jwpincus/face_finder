
# Facial Recognition User System and login
This project is a fork of the basic facial recognition system I designed [here](https://github.com/jwpincus/facial-login-standalone) during sprint 1 of my Turing School capstone project.

This fork is exploring using facial data to authenticate IOT device users that are registered with the site.

There is a live instance of this app running [here](https://re-cognizer.herokuapp.com/)
## Setup
+ this is a rails app. You will need ruby and rails installed on your machine.
+ This app uses a postgres database. You will need to have a PG server running, or be able to configure a connection to one.
### After download run:
+ `bundle`
+ `rake db:create` creates a db on your local postgres server, or a remote if configured
+ `rake db:migrate` creates the necessary tables and columns in the db
+ set the environment variables for `kairos_app_id`, `kairos_key` (Free from [Kairos](http://www.kairos.com)), `kairos_gallery` (users choice, this is how the Kairos API will seperate your user groups) and `confidence` (this variable determines the minimum threshold for a login rejection. set a number between 0.0 and 1.0. The higher the number, the more strict the rejection criteria. Recommend starting at 0.7). The app includes the [figaro](https://github.com/laserlemon/figaro) gem by default for variable management. 
+ `rails s` will start the server

## More Info, Demos, and a comprehensive write up.
Read the write-up for sprint one [here](https://medium.com/@Jwpincus/i-made-a-thing-facial-recognition-e694bc1ac8c8) and sprint two [here](https://medium.com/@Jwpincus/i-made-a-thing-c9635139db32)

## API
endpoint:
 URL: `[your_url]/api/v1/authenticate`,
 Content-type: `application/json`
 body: `{'app_key': [app key generated by creating new app], 'image': [image as base64 jpeg string OR url for hosted image]}`.


  This endpoint will check against reference images for enrolled users that have been added to your app. If the image has a face that is recognized and the user is associated with your app, it will return the following:


```json
{
    "authenticated": true,
    "user": {
        "name": "[user's first name]",
        "email": "[user's email]"
    }
}
```

An unrecognized face or user not associated with the app_key will return the following

```json
{
    "authenticated": false,
    "error": "Unable to find a face that matched an authorized user"
}
```
